"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1607],{1607:(v,g,i)=>{i.r(g),i.d(g,{PlansPageModule:()=>A});var c=i(6895),p=i(433),o=i(8008),h=i(5017),u=i(655),P=i(1135),a=i(5819),t=i(4650),_=i(9846),f=i(374);const C=["scrollElement"];function b(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"ion-toolbar",7)(1,"ion-buttons",8)(2,"ion-button",9),t.NdJ("tap",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.backButtonClickPlan())}),t._UZ(3,"ion-icon",10),t.qZA(),t.TgZ(4,"div",11),t._uU(5),t.ALo(6,"async"),t.qZA()(),t.TgZ(7,"ion-title",12),t._uU(8," DeletePlan "),t.qZA(),t.TgZ(9,"ion-buttons",13)(10,"ion-button",9),t.NdJ("tap",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.removeSelectedPlan())}),t._UZ(11,"ion-icon",14),t.qZA()()()}if(2&e){const n=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,1,n.planItemCount))}}function T(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"ion-toolbar",15)(1,"ion-title"),t._UZ(2,"ion-img",16),t._uU(3," MyPlans "),t.qZA(),t.TgZ(4,"ion-buttons",13)(5,"ion-button",17),t.NdJ("tap",function(s){t.CHM(n);const d=t.oxw();return t.KtG(d.menu(s))}),t._UZ(6,"ion-icon",18),t.qZA()()()}}const Z=function(e){return{"selected-plan":e}};function y(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"ion-item-sliding",19),t.NdJ("press",function(){const d=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.selectPlan(d.id))}),t.TgZ(1,"ion-item",20)(2,"ion-thumbnail",8),t._UZ(3,"ion-img",21),t.qZA(),t.TgZ(4,"ion-label")(5,"h2")(6,"strong"),t._uU(7),t.qZA()(),t.TgZ(8,"h2")(9,"strong"),t._uU(10),t.qZA()()()(),t.TgZ(11,"ion-item-options",13)(12,"ion-item-option",22),t.NdJ("tap",function(){const d=t.CHM(n).$implicit,m=t.oxw();return t.KtG(m.planDetail(d.id))}),t._UZ(13,"ion-icon",23),t.qZA()()()}if(2&e){const n=r.$implicit,l=t.oxw();t.Q6J("ngClass",t.VKq(4,Z,l.selectedPlan===n.id)),t.xp6(3),t.s9C("src",n.img),t.xp6(4),t.Oqu(n.usuario.name),t.xp6(3),t.Oqu(n.title)}}const x=[{path:"",component:(()=>{class e{constructor(n,l,s,d,m,O){this.cd=n,this.navCtrl=l,this.alertCtrl=s,this.popoverCtrl=d,this.uiService=m,this.planService=O,this.hotel=[],this.plan={id:"",title:"",img:""},this.plans=[],this.deletePlan=!1,this.planItemCount=new P.X(0)}ngOnInit(){this.loadPlanes()}menu(n){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.popoverCtrl.create({mode:"md",event:n,dismissOnSelect:!0,component:a.M})).present()})}updateScroll(){setTimeout(()=>{this.content.scrollToBottom()},1500)}loadPlanes(){this.planService.getPlanes().subscribe(n=>{console.log(n),this.plans.push(...n.plans),this.cd.detectChanges()})}planDetail(n){this.navCtrl.navigateForward(`/tabs/plans/plan-detail/${n}`)}clearPlan(){this.selectedPlan=null}selectPlan(n){this.deletePlan=!0,this.selectedPlan===n?this.clearPlan():this.selectedPlan=n,this.planToolbar(this.plan)}planToolbar(n){let l=!1;for(let s of this.hotel)if(s.id===n.id){s.amount+=1,l=!0;break}l||(n.amount=1,this.hotel.push(n)),this.planItemCount.next(this.planItemCount.value+1)}removeSelectedPlan(){return(0,u.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({header:"Warning!!!",message:"You want to delete the user??",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:l=>{console.log("Confirmado Cancelar: blah"),this.backButtonClickPlan()}},{text:"OK",handler:()=>{console.log("Confirmado Aceptar"),this.planService.deletePlan(this.selectedPlan).subscribe(l=>{this.clearPlan(),this.loadPlanes(),this.backButtonClickPlan(),this.uiService.presentToast("Deleted partner")},l=>{console.log(l)})}}]})).present()})}backButtonClickPlan(){this.clearPlan(),this.deletePlan=!1}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.sBO),t.Y36(o.SH),t.Y36(o.Br),t.Y36(o.Dh),t.Y36(_.F),t.Y36(f.D))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-plans"]],viewQuery:function(n,l){if(1&n&&t.Gf(C,5),2&n){let s;t.iGM(s=t.CRH())&&(l.content=s.first)}},decls:7,vars:4,consts:[[1,"ion-no-border"],["color","warning",4,"ngIf"],["color","primary",4,"ngIf"],[3,"scrollEvents"],["scrollElement",""],[1,"ion-padding"],[3,"ngClass","press",4,"ngFor","ngForOf"],["color","warning"],["slot","start"],[3,"tap"],["md","arrow-back-sharp","slot","icon-only","color","dark"],[1,"hotel-length"],[1,"miTitulo"],["slot","end"],["md","trash-sharp","slot","icon-only","color","dark"],["color","primary"],["src","../../../assets/images/logo_small.png",1,"logo-header"],["fill","clear",3,"tap"],["md","ellipsis-vertical-sharp","slot","icon-only","color","light"],[3,"ngClass","press"],["button","","lines","none"],[3,"src"],["color","primary",3,"tap"],["md","eye-sharp","slot","icon-only","color","light"]],template:function(n,l){1&n&&(t.TgZ(0,"ion-header",0),t.YNc(1,b,12,3,"ion-toolbar",1),t.YNc(2,T,7,0,"ion-toolbar",2),t.qZA(),t.TgZ(3,"ion-content",3,4)(5,"ion-list",5),t.YNc(6,y,14,6,"ion-item-sliding",6),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("ngIf",l.deletePlan),t.xp6(1),t.Q6J("ngIf",!l.deletePlan),t.xp6(1),t.Q6J("scrollEvents",!0),t.xp6(3),t.Q6J("ngForOf",l.plans))},dependencies:[c.mk,c.sg,c.O5,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.Xz,o.Ie,o.u8,o.IK,o.td,o.Q$,o.q_,o.Bs,o.wd,o.sr,c.Ov]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(x),h.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,p.u5,o.Pc,M]}),e})()},9846:(v,g,i)=>{i.d(g,{F:()=>h});var c=i(655),p=i(4650),o=i(8008);let h=(()=>{class u{constructor(a,t){this.alertController=a,this.toastController=t}alertaInformativaLogin(a,t,_){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:a,subHeader:t,message:_,buttons:["OK"]})).present()})}alertaInformativa(a){return(0,c.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({message:a,buttons:["OK"]})).present()})}presentToast(a){return(0,c.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:a,duration:1500,position:"bottom",cssClass:"miToast"})).present()})}}return u.\u0275fac=function(a){return new(a||u)(p.LFG(o.Br),p.LFG(o.yF))},u.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);