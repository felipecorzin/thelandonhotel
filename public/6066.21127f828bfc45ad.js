"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6066],{6066:(A,m,s)=>{s.r(m),s.d(m,{ActivitiesPageModule:()=>B});var d=s(6895),g=s(433),n=s(8008),v=s(5017),p=s(655),f=s(1135),l=s(8879),u=s(5819),t=s(4650),P=s(9846),b=s(374),C=s(9633),_=s(9485);const Z=["swiper"],x=["scrollElement"];function T(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-toolbar",12)(1,"ion-buttons",13)(2,"ion-button",14),t.NdJ("tap",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.backButtonClickPlan())}),t._UZ(3,"ion-icon",15),t.qZA(),t.TgZ(4,"div",16),t._uU(5),t.ALo(6,"async"),t.qZA()(),t.TgZ(7,"ion-title",17),t._uU(8," DeletePlan "),t.qZA(),t.TgZ(9,"ion-buttons",18)(10,"ion-button",14),t.NdJ("tap",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.removeSelectedPlan())}),t._UZ(11,"ion-icon",19),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,1,e.planItemCount))}}function y(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-toolbar",20)(1,"ion-title"),t._UZ(2,"ion-img",21),t._uU(3," Activities "),t.qZA(),t.TgZ(4,"ion-buttons",18)(5,"ion-button",22),t.NdJ("tap",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.menu(a))}),t._UZ(6,"ion-icon",23),t.qZA()()()}}function w(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-card"),t._UZ(1,"ion-img",25),t.TgZ(2,"div",26),t._uU(3),t.qZA(),t.TgZ(4,"ion-card-content")(5,"h2")(6,"strong"),t._uU(7),t.qZA()(),t.TgZ(8,"h2")(9,"strong"),t._uU(10),t.qZA()(),t.TgZ(11,"ion-button",27),t.NdJ("tap",function(){t.CHM(e);const a=t.oxw().$implicit,c=t.oxw();return t.KtG(c.openActiviti(a.id))}),t._uU(12," More.... "),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.s9C("src",e.img),t.xp6(2),t.Oqu(e.nombre),t.xp6(4),t.Oqu(e.fecha),t.xp6(3),t.Oqu(e.hora)}}function M(i,r){1&i&&t.YNc(0,w,13,4,"ng-template",24)}const O=function(i){return{"selected-plan":i}};function S(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"ion-item-sliding",28),t.NdJ("press",function(){const c=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.selectPlan(c.id))}),t.TgZ(1,"ion-item",29)(2,"ion-thumbnail",13),t._UZ(3,"ion-img",25),t.qZA(),t.TgZ(4,"ion-label")(5,"h2")(6,"strong"),t._uU(7),t.qZA()(),t.TgZ(8,"h2")(9,"strong"),t._uU(10),t.qZA()()()(),t.TgZ(11,"ion-item-options",18)(12,"ion-item-option",30),t.NdJ("tap",function(){const c=t.CHM(e).$implicit,h=t.oxw();return t.KtG(h.planDetail(c.id))}),t._UZ(13,"ion-icon",31),t.qZA()()()}if(2&i){const e=r.$implicit,o=t.oxw();t.Q6J("ngClass",t.VKq(4,O,o.selectedPlan===e.id)),t.xp6(3),t.s9C("src",e.img),t.xp6(4),t.Oqu(e.name),t.xp6(3),t.Oqu(e.nombre)}}l.ZP.use([l.pt]);const U=[{path:"",component:(()=>{class i{constructor(e,o,a,c,h,G,E){this.cd=e,this.navCtrl=o,this.alertCtrl=a,this.popoverCtrl=c,this.uiService=h,this.planService=G,this.activitiesService=E,this.hotel=[],this.configActivi={slidesPerView:1.05,spaceBetween:10,slidesOffsetBefore:11,centeredSlides:!0,autoplay:!0},this.actividades=[],this.plan={id:"",name:"",nombre:"",img:""},this.plans=[],this.deletePlan=!1,this.planItemCount=new f.X(0)}ngOnInit(){this.updateScroll(),this.loadActivities(),this.loadPlanes()}handleRefresh(e){this.loadActivities(),this.loadPlanes(),setTimeout(()=>{e.target.complete()},2e3)}menu(e){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.popoverCtrl.create({mode:"md",event:e,dismissOnSelect:!0,component:u.M})).present()})}updateScroll(){this.loadActivities(),this.loadPlanes(),setTimeout(()=>{this.content.scrollToBottom()},1500)}ngAfterContentChecked(){this.swiper&&this.swiper.updateSwiper({})}loadActivities(){this.activitiesService.getActividades().subscribe(e=>{this.actividades=e})}openActiviti(e){this.navCtrl.navigateForward(`/tabs/activities/activiti/${e}`)}loadPlanes(){this.planService.getPlanes().subscribe(e=>{console.log(e),this.plans=e,this.cd.detectChanges()})}planDetail(e){this.navCtrl.navigateForward(`/tabs/activities/plan-detail/${e}`)}clearPlan(){this.selectedPlan=null}selectPlan(e){this.deletePlan=!0,this.selectedPlan===e?this.clearPlan():this.selectedPlan=e,this.planToolbar(this.plan)}planToolbar(e){let o=!1;for(let a of this.hotel)if(a.id===e.id){a.amount+=1,o=!0;break}o||(e.amount=1,this.hotel.push(e)),this.planItemCount.next(this.planItemCount.value+1)}removeSelectedPlan(){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertCtrl.create({header:"Warning!!!",message:"You want to delete the user??",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:o=>{console.log("Confirmado Cancelar: blah"),this.backButtonClickPlan()}},{text:"OK",handler:()=>{console.log("Confirmado Aceptar"),this.planService.deletePlan(this.selectedPlan).subscribe(o=>{this.clearPlan(),this.loadPlanes(),this.backButtonClickPlan(),this.uiService.presentToast("Deleted partner")},o=>{console.log(o)})}}]})).present()})}backButtonClickPlan(){this.clearPlan(),this.deletePlan=!1}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(n.SH),t.Y36(n.Br),t.Y36(n.Dh),t.Y36(P.F),t.Y36(b.D),t.Y36(C.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-activities"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Z,5),t.Gf(x,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.swiper=a.first),t.iGM(a=t.CRH())&&(o.content=a.first)}},decls:14,vars:6,consts:[[1,"ion-no-border"],["color","warning",4,"ngIf"],["color","primary",4,"ngIf"],[1,"card-background-page",3,"scrollEvents"],["scrollElement",""],["slot","fixed",3,"ionRefresh"],["refreshingSpinner","bubbles"],[3,"config"],["swiper",""],[4,"ngFor","ngForOf"],[1,"ion-padding"],[3,"ngClass","press",4,"ngFor","ngForOf"],["color","warning"],["slot","start"],[3,"tap"],["md","arrow-back-sharp","slot","icon-only","color","dark"],[1,"hotel-length"],[1,"miTitulo"],["slot","end"],["md","trash-sharp","slot","icon-only","color","dark"],["color","primary"],["src","../../../assets/img/logo_small.png",1,"logo-header"],["fill","clear",3,"tap"],["md","ellipsis-vertical-sharp","slot","icon-only","color","light"],["swiperSlide",""],[3,"src"],[1,"card-title"],["shape","round","expand","block","color","secondary",1,"miBoton",3,"tap"],[3,"ngClass","press"],["button","","lines","none"],["color","primary",3,"tap"],["md","eye-sharp","slot","icon-only","color","light"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0),t.YNc(1,T,12,3,"ion-toolbar",1),t.YNc(2,y,7,0,"ion-toolbar",2),t.qZA(),t.TgZ(3,"ion-content",3,4)(5,"ion-refresher",5),t.NdJ("ionRefresh",function(c){return o.handleRefresh(c)}),t._UZ(6,"ion-refresher-content",6),t.qZA(),t.TgZ(7,"swiper",7,8),t.YNc(9,M,1,0,null,9),t.qZA(),t.TgZ(10,"ion-item-divider"),t._uU(11," My Plans "),t.qZA(),t.TgZ(12,"ion-list",10),t.YNc(13,S,14,6,"ion-item-sliding",11),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.deletePlan),t.xp6(1),t.Q6J("ngIf",!o.deletePlan),t.xp6(1),t.Q6J("scrollEvents",!0),t.xp6(4),t.Q6J("config",o.configActivi),t.xp6(2),t.Q6J("ngForOf",o.actividades),t.xp6(4),t.Q6J("ngForOf",o.plans))},dependencies:[d.mk,d.sg,d.O5,n.YG,n.Sm,n.PM,n.FN,n.W2,n.Gu,n.gu,n.Xz,n.Ie,n.rH,n.u8,n.IK,n.td,n.Q$,n.q_,n.nJ,n.Wo,n.Bs,n.wd,n.sr,_.nF,_.YC,d.Ov],styles:[".swiper-container{width:100%;padding-left:15px;padding-right:15px;margin-top:15px;margin-bottom:15px}.card-background-page ion-card{position:relative;text-align:center}.card-background-page .card-title{position:absolute;top:36%;font-size:2em;width:100%;font-weight:700;color:#fff;text-shadow:0px 0px 11px rgb(0,0,0)}.card-background-page .card-subtitle{font-size:1em;position:absolute;top:52%;width:100%;color:#fff}.card-background-page h2{font-size:1em;font-weight:700;color:#000}ion-refresher{margin-top:40px}ion-item-divider{--background: #666;--color: #fff;font-size:1.5em;font-weight:700}\n"],encapsulation:2}),i})()}];let F=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[v.Bz.forChild(U),v.Bz]}),i})(),B=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[d.ez,g.u5,n.Pc,F,_.kz]}),i})()},9846:(A,m,s)=>{s.d(m,{F:()=>v});var d=s(655),g=s(4650),n=s(8008);let v=(()=>{class p{constructor(l,u){this.alertController=l,this.toastController=u}alertaInformativaLogin(l,u,t){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:l,subHeader:u,message:t,buttons:["OK"]})).present()})}alertaInformativa(l){return(0,d.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({message:l,buttons:["OK"]})).present()})}presentToast(l){return(0,d.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:l,duration:1500,position:"bottom",cssClass:"miToast"})).present()})}}return p.\u0275fac=function(l){return new(l||p)(g.LFG(n.Br),g.LFG(n.yF))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);